<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Timer tests</title>
    <link href="qunit-1.17.1.css" rel="stylesheet" />
</head>
<body>
    <span id="timer"></span>
    <div id="qunit"></div>
    <div id="qunit-fixture"></div>
    <script src="../jquery.js"></script>
    <script src="qunit-1.17.1.js"></script>
    <script src="../timer.js"></script>
    <script>
        QUnit.test("Switch to next mode", function (assert) {
            var timer = new Timer();
            timer.mode = 0;
            timer.switchToNextMode();
            assert.equal(timer.mode, 1);
            timer.switchToNextMode();
            assert.equal(timer.mode, 0);
        });
        QUnit.test("Long break after x switches", function (assert) {
            var timer = new Timer();
            timer.mode = timer.modes.WORK;
            timer.intervalsUntilBreak = 4;
            for (var i = 0; i < timer.intervalsUntilBreak - 1; i++) {
                //rest
                timer.switchToNextMode();
                //work
                timer.switchToNextMode();
            }
            //rest
            timer.switchToNextMode();
            assert.equal(timer.mode, timer.modes.LONG_REST);
            timer.intervalCountNotRests = 1;
            timer.intervalsUntilBreak = 3
            timer.mode = timer.modes.WORK;
            for (var i = 0; i < timer.intervalsUntilBreak - 1; i++) {
                //rest
                timer.switchToNextMode();
                //work
                timer.switchToNextMode();
            }
            //rest
            timer.switchToNextMode();
            assert.equal(timer.mode, timer.modes.LONG_REST);
        });
    </script>
</body>
</html>